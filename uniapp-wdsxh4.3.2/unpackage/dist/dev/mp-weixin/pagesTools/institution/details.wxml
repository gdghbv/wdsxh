<page-meta page-style="{{'overflow:'+(pageShow?'hidden':'visible')}}"></page-meta><view class="container" style="{{'--theme-color:'+(themeColor)+';'}}"><title-bar vue-id="550ac245-1" title="机构详情" bind:__l="__l"></title-bar><view class="container-main"><block wx:if="{{loadEnd}}"><block><carousel vue-id="550ac245-2" show-data="{{institutionInfo.image_list}}" height="320rpx" radius="10rpx" bottom="24rpx" right="24rpx" bind:__l="__l"></carousel><view class="main-info flex align-items-center"><image class="info-logo" src="{{institutionInfo.icon}}" mode="aspectFill"></image><view class="info-name flex-item">{{appletName+" | "+institutionInfo.name}}</view></view><view class="main-column"><view class="column-title">机构简介</view><view class="column-content"><mp-html vue-id="550ac245-3" content="{{institutionInfo.introduction}}" bind:__l="__l"></mp-html></view></view><block wx:if="{{$root.g0}}"><view class="main-column"><view class="column-title">成员列表</view><view class="column-list"><block wx:for="{{memberList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="list-item"><view class="item-info flex align-items-center"><image class="info-avatar" src="{{item.usermember.avatar}}" mode="aspectFill"></image><view class="info-box flex-item"><view class="box-title text-ellipsis">{{item.usermember.name}}</view><view class="box-subtitle text-ellipsis">{{appletName+" | "+item.member_level}}</view><view class="box-subtitle text-ellipsis" style="{{'color:'+(themeColor)+';'}}">{{item.institution_level.level_name}}</view></view></view><view class="item-introduce flex"><view class="introduce-text text-ellipsis-more"><view data-event-opts="{{[['tap',[['openMemberDetails',['$0'],[[['memberList','',index]]]]]]]}}" class="btn" bindtap="__e">详情</view>{{''+item.introduction+''}}<view class="mask"></view></view></view></view></block></view></view></block><block wx:if="{{institutionInfo.apply_state!=2}}"><view data-event-opts="{{[['tap',[['toApply']]]]}}" class="main-apply" bindtap="__e"><image class="apply-icon" src="/static/add.png" mode="aspectFit"></image><text class="apply-text">申请加入</text></view></block></block></block><block wx:else><block wx:if="{{showLogin}}"><view class="main-login"><image class="login-image" src="{{loginImg}}" mode="aspectFit"></image><view class="login-tips">小程序需要登录注册才能使用相关功能，请登录后查看该页面</view><view data-event-opts="{{[['tap',[['toLogin']]]]}}" class="login-btn" bindtap="__e">前往登录</view><view data-event-opts="{{[['tap',[['toBack']]]]}}" class="login-btn cancel" bindtap="__e">返回上一页</view></view></block></block></view><uni-popup class="vue-ref" vue-id="550ac245-4" type="center" data-ref="popupModal" data-event-opts="{{[['^change',[['onModalChange']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="container-popup"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="popup-close" bindtap="__e"><image src="/static/close.png" mode="aspectFit"></image></view><view class="popup-content flex-direction-column"><block wx:if="{{popupInfo&&popupInfo.usermember}}"><view class="content-info flex align-items-center"><image class="info-avatar" src="{{popupInfo.usermember.avatar}}" mode="aspectFill"></image><view class="info-box flex-item"><view class="box-title text-ellipsis">{{popupInfo.usermember.name}}</view><view class="box-subtitle text-ellipsis">{{appletName+" | "+popupInfo.member_level}}</view><view class="box-subtitle text-ellipsis" style="{{'color:'+(themeColor)+';'}}">{{popupInfo.institution_level.level_name}}</view></view></view></block><scroll-view class="contetnt-scroll flex-item" scroll-y="{{true}}"><mp-html vue-id="{{('550ac245-5')+','+('550ac245-4')}}" content="{{popupInfo.content}}" bind:__l="__l"></mp-html></scroll-view></view></view></uni-popup></view>