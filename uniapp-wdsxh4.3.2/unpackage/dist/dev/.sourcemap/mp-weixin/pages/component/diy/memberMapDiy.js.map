{"version":3,"sources":["webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?33b7","webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?7f48","webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?2985","webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?df55","uni-app:///pages/component/diy/memberMapDiy.vue","webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?9c1d","webpack:///D:/Projects/实习文件-惠爱/惠爱商协会/uniapp-wdsxh4.3.2/pages/component/diy/memberMapDiy.vue?e38d"],"names":["name","props","data","loadEnd","classifyList","selectClassify","page","limit","hasMore","memberList","markersList","includePoints","loadTimer","toPageTimer","isExpandCategory1","isExpandCategory2","componentHeight","computed","mapItemBorderRadius","mapHeight","mapBorderRadius","mapPadding","categoryBorderRadius","categoryMaxHeight","maxHeight","categoryMarginTop","categoryMarginLeft","categoryIconDown","categoryPaddingTop","categoryPaddingLeft","categoryItemSpace","categoryBtnBorderRadius","categoryBtnPadding","watch","showCategory","handler","immediate","deep","destroyed","methods","getMemberList","type","res","markersPoints","id","latitude","longitude","iconPath","width","height","customCallout","anchorX","anchorY","display","enableDefaultStyle","zoomOnClick","gridSize","padding","points","uni","title","icon","console","calculateBounds","minLat","maxLat","minLng","maxLng","getClassifyList","setTimeout","endFunction","getMemberLevel","getIndustry","getInstitution","scrollBottom","changeClassify","toMemberDetails","mode","path","handleExpand"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AAC+M;AAC/M,gBAAgB,gNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oWAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAq0B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACmJz1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACAC;QACA;MACA;QACAA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACAC;QACA;UACA;UACA;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;QAAAC;MAAA;MACA;QACA;UACAvC;QACA;UACAA;QACA;UACAA;QACA;MACA;MACA;QACA;UACA;UACA;UACAwC;YACAC;cACAC;cACAC;cACAC;cAcAC;cACAC;cACAC;cACAC;gBACAC;gBACAC;gBACAC;cACA;YAEA;UACA;UAEA;UASA;YACA;cACAR;cACAC;YACA;UACA;UAEA;UACA;YACAQ;YACAC;YACAC;UACA;UACA;YACAC;YACAC;UACA;QAKA;UACAC;YACAC;YACAC;UACA;QACA;MACA;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACAL;QACA;QACA;QACAM;QACAC;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAH;MACAC;MACAC;MACAC;MACA;QAAAtB;QAAAC;MAAA;QAAAD;QAAAC;MAAA;IACA;IACA;IACAsB;MAAA;MACA;MACA;QACA;QACAC;UACAV;YACA;UACA;QACA;MACA;MACA;QACA;UACAW;QACA;MACA;QACA;QACA;UACAA;QACA;MACA;QACA;UACAA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;UACA;UACA;QACA;UACA;UACAZ;YACAC;YACAC;UACA;QACA;MACA;QACA;QACAC;MACA;IACA;IACA;IACAU;MAAA;MACA;QACA;UACA;UACA;QACA;UACA;UACAb;YACAC;YACAC;UACA;QACA;MACA;QACA;QACAC;MACA;IACA;IACA;IACAW;MAAA;MACA;QACAnE;QACAC;MACA;QACA;UACA;UACA;UACA;UACA;QACA;UACA;UACAoD;YACAC;YACAC;UACA;QACA;MACA;QACA;QACAC;MACA;IACA;IACA;IACAY;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;MACA;QACA;UAAA;QAAA;QACA;UACA;QACA;UACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MACApB;QACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjfA;AAAA;AAAA;AAAA;AAAgiD,CAAgB,g6CAAG,EAAC,C;;;;;;;;;;;ACApjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/component/diy/memberMapDiy.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./memberMapDiy.vue?vue&type=template&id=2e5f30f8&\"\nvar renderjs\nimport script from \"./memberMapDiy.vue?vue&type=script&lang=js&\"\nexport * from \"./memberMapDiy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./memberMapDiy.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/component/diy/memberMapDiy.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./memberMapDiy.vue?vue&type=template&id=2e5f30f8&\"","var components\ntry {\n  components = {\n    uniTransition: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-transition/components/uni-transition/uni-transition\" */ \"@/uni_modules/uni-transition/components/uni-transition/uni-transition.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.loadEnd\n    ? _vm.showCategory.styleMode == 2 && _vm.classifyList.length\n    : null\n  var g1 = _vm.loadEnd && g0 ? _vm.selectClassify.length : null\n  var g2 = _vm.loadEnd && g0 ? _vm.selectClassify.length : null\n  var l0 =\n    _vm.loadEnd && g0\n      ? _vm.__map(_vm.classifyList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g3 = _vm.selectClassify.includes(item.id)\n          var g4 = _vm.selectClassify.includes(item.id)\n          return {\n            $orig: $orig,\n            g3: g3,\n            g4: g4,\n          }\n        })\n      : null\n  var g5 = _vm.loadEnd && !g0 ? _vm.classifyList.length : null\n  var g6 = _vm.loadEnd && !g0 && g5 ? _vm.selectClassify.length : null\n  var g7 = _vm.loadEnd && !g0 && g5 ? _vm.selectClassify.length : null\n  var l1 =\n    _vm.loadEnd && !g0 && g5\n      ? _vm.__map(_vm.classifyList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g8 = _vm.selectClassify.includes(item.id)\n          var g9 = _vm.selectClassify.includes(item.id)\n          return {\n            $orig: $orig,\n            g8: g8,\n            g9: g9,\n          }\n        })\n      : null\n  var g10 = _vm.loadEnd ? _vm.memberList.length : null\n  var l2 =\n    _vm.loadEnd && g10\n      ? _vm.__map(_vm.memberList, function (item, __i0__) {\n          var $orig = _vm.__get_orig(item)\n          var m0 = Number(item.id)\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  var g11 =\n    _vm.loadEnd && _vm.showCategory.styleMode == 2 && _vm.isExpandCategory2\n      ? _vm.selectClassify.length\n      : null\n  var g12 =\n    _vm.loadEnd && _vm.showCategory.styleMode == 2 && _vm.isExpandCategory2\n      ? _vm.selectClassify.length\n      : null\n  var l3 =\n    _vm.loadEnd && _vm.showCategory.styleMode == 2 && _vm.isExpandCategory2\n      ? _vm.__map(_vm.classifyList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g13 = _vm.selectClassify.includes(item.id)\n          var g14 = _vm.selectClassify.includes(item.id)\n          return {\n            $orig: $orig,\n            g13: g13,\n            g14: g14,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n        l1: l1,\n        g10: g10,\n        l2: l2,\n        g11: g11,\n        g12: g12,\n        l3: l3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./memberMapDiy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./memberMapDiy.vue?vue&type=script&lang=js&\"","<!-- +----------------------------------------------------------------------\r\n| 麦沃德科技赋能开发者，助力商协会发展 \r\n+----------------------------------------------------------------------\r\n| Copyright (c) 2017～2024  www.wdsxh.cn    All rights reserved.\r\n+----------------------------------------------------------------------\r\n| 沃德商协会系统并不是自由软件，不加密，并不代表开源，未经许可不可自由转售和商用\r\n+----------------------------------------------------------------------\r\n| Author: MY WORLD Team <bd@maiwd.cn>   www.maiwd.cn\r\n+----------------------------------------------------------------------\r\n| 组件-会员地图 开发者: 麦沃德科技-半夏\r\n+---------------------------------------------------------------------- -->\r\n\r\n<template>\r\n\t<view class=\"diy-member-map\" :class=\"{'flex-column': showCategory.styleMode == 2 && showMap.heightType == 1}\" :style=\"{height: showMap.heightType == 2 ? `auto` : `calc(100vh - ${spaceHeight}px)`, background: showMap.background, borderRadius: mapItemBorderRadius}\" v-if=\"loadEnd\">\r\n\t\t<view class=\"map-classify style-2\" v-if=\"showCategory.styleMode == 2 && classifyList.length\" @scrolltolower=\"scrollBottom\" :style=\"{background: showCategory.background, padding: `0 ${categoryPaddingLeft}`}\">\r\n\t\t\t<scroll-view scroll-x class=\"classify-list\" :style=\"{padding: `${categoryPaddingTop} 0`}\">\r\n\t\t\t\t<view class=\"list-item\" @click=\"changeClassify(-1)\" :style=\"{\r\n\t\t\t\t\tbackground: (!selectClassify.length ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\tcolor: !selectClassify.length ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t<text>全部</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list-item\" v-for=\"(item, index) in classifyList\" :key=\"index\" @click=\"changeClassify(item.id)\" :style=\"{\r\n\t\t\t\t\tmarginLeft: categoryItemSpace, \r\n\t\t\t\t\tbackground: (selectClassify.includes(item.id) ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\tcolor: selectClassify.includes(item.id) ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view class=\"classify-more\" @click=\"handleExpand(1)\">\r\n\t\t\t\t<view class=\"more-icon\" :style=\"{'background-image': 'url('+ categoryIconDown +')'}\" v-if=\"categoryIconDown\"></view>\r\n\t\t\t\t<text class=\"more-text\" :style=\"{color: showCategory.expandColor}\">展开列表</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"map-classify style-1\" v-else-if=\"classifyList.length\" :style=\"{\r\n\t\t\ttop: categoryMarginTop,\r\n\t\t\tleft: showCategory.position == 'right' ? 'initial' : categoryMarginLeft,\r\n\t\t\tright: showCategory.position == 'right' ? categoryMarginLeft : 'initial',\r\n\t\t\twidth: showCategory.widthType == 2 ? `${showCategory.widthNumber}%` : 'auto',\r\n\t\t\tmaxWidth: `calc((100% - ${categoryMarginLeft} - ${categoryMarginLeft}) * ${showCategory.widthType == 2 ? `${showCategory.widthNumber / 100}` : 1})`,\r\n\t\t\tmaxHeight: showMap.heightType == 2 ? categoryMaxHeight : `calc(100vh - ${spaceHeight}px - ${categoryMaxHeight})`,\r\n\t\t\talignItems: showCategory.position == 'right' ? 'flex-end' : 'flex-start'}\">\r\n\t\t\t<view class=\"classify-more\" :class=\"{collapse: !isExpandCategory1}\" @click=\"handleExpand()\" :style=\"{\r\n\t\t\t\tbackground: showCategory.background,\r\n\t\t\t\tborderRadius: isExpandCategory1 ? categoryBorderRadius : (showCategory.position == 'right' ? `${categoryBorderRadius} 0 0 ${categoryBorderRadius}` : `0 ${categoryBorderRadius} ${categoryBorderRadius} 0`),\r\n\t\t\t\tleft: showCategory.position == 'right' ? 'initial' : `-${categoryMarginLeft}`,\r\n\t\t\t\tright: showCategory.position == 'right' ? `-${categoryMarginLeft}` : 'initial',}\">\r\n\t\t\t\t<text class=\"more-text\" :style=\"{color: showCategory.expandColor}\">{{isExpandCategory1 ? \"收起\" : \"展开\"}}列表</text>\r\n\t\t\t\t<view class=\"more-icon\" :style=\"{'background-image': 'url('+ categoryIconDown +')'}\" v-if=\"categoryIconDown\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<uni-transition style=\"width: 100%;\" :mode-class=\"showCategory.position == 'right' ? 'slide-right' : 'slide-left'\" :duration=\"80\" :show=\"isExpandCategory1\">\r\n\t\t\t\t<scroll-view scroll-y @scrolltolower=\"scrollBottom\" :style=\"{\r\n\t\t\t\t\tborderRadius: categoryBorderRadius,\r\n\t\t\t\t\tbackground: showCategory.background,\r\n\t\t\t\t\tmaxHeight: showMap.heightType == 2 ? `calc(${categoryMaxHeight} - 80rpx)` : `calc(100vh - 80rpx - ${spaceHeight}px - ${categoryMaxHeight})`}\">\r\n\t\t\t\t\t<view class=\"classify-list\" :style=\"{rowGap: categoryItemSpace, padding: `${categoryPaddingTop} ${categoryPaddingLeft}`}\">\r\n\t\t\t\t\t\t<view class=\"list-item\" @click=\"changeClassify(-1)\" :style=\"{\r\n\t\t\t\t\t\t\tbackground: (!selectClassify.length ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\t\tcolor: !selectClassify.length ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t\t<text>全部</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-item\" v-for=\"(item, index) in classifyList\" :key=\"index\" @click=\"changeClassify(item.id)\" :style=\"{\r\n\t\t\t\t\t\t\tbackground: (selectClassify.includes(item.id) ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\t\tcolor: selectClassify.includes(item.id) ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</uni-transition>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef MP-WEIXIN -->\r\n\t\t\t<scroll-view scroll-y @scrolltolower=\"scrollBottom\" v-if=\"isExpandCategory1\" :style=\"{\r\n\t\t\t\tborderRadius: categoryBorderRadius,\r\n\t\t\t\tbackground: showCategory.background,\r\n\t\t\t\tmaxHeight: showMap.heightType == 2 ? `calc(${categoryMaxHeight} - 80rpx)` : `calc(100vh - 80rpx - ${spaceHeight}px - ${categoryMaxHeight})`}\">\r\n\t\t\t\t<view class=\"classify-list\" :style=\"{rowGap: categoryItemSpace, padding: `${categoryPaddingTop} ${categoryPaddingLeft}`}\">\r\n\t\t\t\t\t<view class=\"list-item\" @click=\"changeClassify(-1)\" :style=\"{\r\n\t\t\t\t\t\tbackground: (!selectClassify.length ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\tcolor: !selectClassify.length ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t<text>全部</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"list-item\" v-for=\"(item, index) in classifyList\" :key=\"index\" @click=\"changeClassify(item.id)\" :style=\"{\r\n\t\t\t\t\t\tbackground: (selectClassify.includes(item.id) ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\tcolor: selectClassify.includes(item.id) ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t\t<view class=\"map-context\" :style=\"{height: showMap.heightType == 2 ? mapHeight : '100%', padding: mapPadding}\">\r\n\t\t\t<map class=\"map\" id=\"map\" :style=\"{borderRadius: mapBorderRadius}\" :markers=\"markersList\" :include-points=\"includePoints\" @callouttap=\"toMemberDetails\" @markertap=\"toMemberDetails\">\r\n\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t<cover-view slot=\"callout\" class=\"map-callout\" v-if=\"memberList.length\">\r\n\t\t\t\t\t<cover-view :marker-id=\"Number(item.id)\" v-for=\"item in memberList\" :key=\"item.id\">\r\n\t\t\t\t\t\t<cover-view class=\"callout-item\">\r\n\t\t\t\t\t\t\t<cover-image class=\"item-avatar\" :src=\"item.avatar\"></cover-image>\r\n\t\t\t\t\t\t\t<cover-view class=\"item-name\">{{item.name}}</cover-view>\r\n\t\t\t\t\t\t</cover-view>\r\n\t\t\t\t\t</cover-view>\r\n\t\t\t\t</cover-view>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</map>\r\n\t\t</view>\r\n\t\t<view class=\"map-popup\" v-if=\"showCategory.styleMode == 2 && isExpandCategory2\">\r\n\t\t\t<view class=\"popup-classify\" :style=\"{background: showCategory.background, padding: `0 ${categoryPaddingLeft}`}\">\r\n\t\t\t\t<scroll-view scroll-y class=\"classify-scroll\" :style=\"{maxHeight: `${componentHeight}px`, padding: `${categoryPaddingTop} 0`}\">\r\n\t\t\t\t\t<view class=\"scroll-list\" :style=\"{gap: categoryItemSpace}\">\r\n\t\t\t\t\t\t<view class=\"list-item\" @click=\"changeClassify(-1)\" :style=\"{\r\n\t\t\t\t\t\t\tbackground: (!selectClassify.length ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\t\tcolor: !selectClassify.length ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t\t<text>全部</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-item\" v-for=\"(item, index) in classifyList\" :key=\"index\" @click=\"changeClassify(item.id)\" :style=\"{\r\n\t\t\t\t\t\t\tbackground: (selectClassify.includes(item.id) ? showCategory.btnActiveBackground : showCategory.btnBackground), \r\n\t\t\t\t\t\t\tborderRadius: categoryBtnBorderRadius, \r\n\t\t\t\t\t\t\tpadding: categoryBtnPadding,\r\n\t\t\t\t\t\t\tcolor: selectClassify.includes(item.id) ? showCategory.btnActiveColor : showCategory.btnColor}\">\r\n\t\t\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"scroll-space\"></view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"classify-more\" :style=\"{background: showCategory.background}\" @click=\"handleExpand(2)\">\r\n\t\t\t\t\t<view class=\"more-icon\" style=\"transform: rotate(180deg);\" :style=\"{'background-image': 'url('+ categoryIconDown +')'}\" v-if=\"categoryIconDown\"></view>\r\n\t\t\t\t\t<text class=\"more-text\" :style=\"{color: showCategory.expandColor}\">收起列表</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport svgData from \"@/common/svg.js\"\r\n\texport default {\r\n\t\tname: \"memberMapDiy\",\r\n\t\tprops: ['showMap', 'showCategory', 'spaceHeight'],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 加载完成\r\n\t\t\t\tloadEnd: false,\r\n\t\t\t\t// 分类列表 1.行业分类，2.分支机构，3.会员级别\r\n\t\t\t\tclassifyList: [],\r\n\t\t\t\t// 已选分类\r\n\t\t\t\tselectClassify: [],\r\n\t\t\t\t// 分类查询参数\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tlimit: 100,\r\n\t\t\t\thasMore: false,\r\n\t\t\t\t// 会员列表\r\n\t\t\t\tmemberList: [],\r\n\t\t\t\t// 地图标记点\r\n\t\t\t\tmarkersList: [],\r\n\t\t\t\t// 所有标记点\r\n\t\t\t\tincludePoints: [],\r\n\t\t\t\t// 查询数据防抖延时器\r\n\t\t\t\tloadTimer: null,\r\n\t\t\t\t// 页面跳转防抖延时器\r\n\t\t\t\ttoPageTimer: null,\r\n\t\t\t\t// 分类弹窗是否展开-样式1\r\n\t\t\t\tisExpandCategory1: true,\r\n\t\t\t\t// 分类弹窗是否展开-样式2\r\n\t\t\t\tisExpandCategory2: false,\r\n\t\t\t\t// 组件高度\r\n\t\t\t\tcomponentHeight: 0,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmapItemBorderRadius() {\r\n\t\t\t\treturn uni.upx2px(this.showMap.itemBorderRadius * 2) + 'px';\r\n\t\t\t},\r\n\t\t\tmapHeight() {\r\n\t\t\t\tif (this.showMap.heightType == 2) {\r\n\t\t\t\t\treturn uni.upx2px(this.showMap.height * 2) + 'px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '100%';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmapBorderRadius() {\r\n\t\t\t\treturn uni.upx2px(this.showMap.borderRadius * 2) + 'px';\r\n\t\t\t},\r\n\t\t\tmapPadding() {\r\n\t\t\t\treturn `${uni.upx2px(this.showMap.paddingTop * 2)}px ${uni.upx2px(this.showMap.paddingLeft * 2)}px`;\r\n\t\t\t},\r\n\t\t\tcategoryBorderRadius() {\r\n\t\t\t\treturn uni.upx2px(this.showCategory.borderRadius * 2) + 'px';\r\n\t\t\t},\r\n\t\t\tcategoryMaxHeight() {\r\n\t\t\t\tvar maxHeight = 0\r\n\t\t\t\tif (this.showMap.heightType == 2) {\r\n\t\t\t\t\tmaxHeight = this.showMap.height - (this.showCategory.marginTop * 2)\r\n\t\t\t\t\treturn uni.upx2px(maxHeight * 2) + 'px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmaxHeight = this.showCategory.marginTop * 2\r\n\t\t\t\t\treturn uni.upx2px(maxHeight * 2) + 'px';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcategoryMarginTop() {\r\n\t\t\t\treturn `${uni.upx2px(this.showCategory.marginTop * 2)}px`\r\n\t\t\t},\r\n\t\t\tcategoryMarginLeft() {\r\n\t\t\t\treturn `${uni.upx2px(this.showCategory.marginLeft * 2)}px`\r\n\t\t\t},\r\n\t\t\tcategoryIconDown() {\r\n\t\t\t\treturn svgData.svgToUrl(\"expand\", this.showCategory.expandColor)\r\n\t\t\t},\r\n\t\t\tcategoryPaddingTop() {\r\n\t\t\t\treturn `${uni.upx2px(this.showCategory.paddingTop * 2)}px`\r\n\t\t\t},\r\n\t\t\tcategoryPaddingLeft() {\r\n\t\t\t\treturn `${uni.upx2px(this.showCategory.paddingLeft * 2)}px`\r\n\t\t\t},\r\n\t\t\tcategoryItemSpace() {\r\n\t\t\t\treturn uni.upx2px(this.showCategory.itemSpace * 2) + 'px';\r\n\t\t\t},\r\n\t\t\tcategoryBtnBorderRadius() {\r\n\t\t\t\treturn uni.upx2px(this.showCategory.btnBorderRadius * 2) + 'px';\r\n\t\t\t},\r\n\t\t\tcategoryBtnPadding() {\r\n\t\t\t\treturn `${uni.upx2px(this.showCategory.btnPaddingTop * 2)}px ${uni.upx2px(this.showCategory.btnPaddingLeft * 2)}px`\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tshowCategory: {\r\n\t\t\t\thandler(value) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.getClassifyList()\r\n\t\t\t\t\t\tthis.getMemberList()\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true,\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tif (this.loadTimer) clearTimeout(this.loadTimer)\r\n\t\t\tif (this.toPageTimer) clearTimeout(this.toPageTimer)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取会员列表\r\n\t\t\tgetMemberList() {\r\n\t\t\t\tvar data = { type: this.showCategory.type }\r\n\t\t\t\tif (this.selectClassify.length) {\r\n\t\t\t\t\tif (this.showCategory.type == 1) {\r\n\t\t\t\t\t\tdata.member_level_id = this.selectClassify.join(\",\")\r\n\t\t\t\t\t} else if (this.showCategory.type == 2) {\r\n\t\t\t\t\t\tdata.industry_category_id = this.selectClassify.join(\",\")\r\n\t\t\t\t\t} else if (this.showCategory.type == 3) {\r\n\t\t\t\t\t\tdata.institution_id = this.selectClassify.join(\",\")\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.request(\"member.memberMapList\", data).then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tthis.memberList = res.data || []\r\n\t\t\t\t\t\tvar markersPoints = []\r\n\t\t\t\t\t\tres.data.forEach((item) => {\r\n\t\t\t\t\t\t\tmarkersPoints.push({\r\n\t\t\t\t\t\t\t\tid: Number(item.id),\r\n\t\t\t\t\t\t\t\tlatitude: item.latitude,\r\n\t\t\t\t\t\t\t\tlongitude: item.longitude,\r\n\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\ticonPath: item.avatar,\r\n\t\t\t\t\t\t\t\twidth: 28,\r\n\t\t\t\t\t\t\t\theight: 28,\r\n\t\t\t\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\t\t\t\tdisplay: \"ALWAYS\",\r\n\t\t\t\t\t\t\t\t\tcontent: item.name,\r\n\t\t\t\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\ticonPath: \"/static/point.png\",\r\n\t\t\t\t\t\t\t\twidth: 20,\r\n\t\t\t\t\t\t\t\theight: 20,\r\n\t\t\t\t\t\t\t\tcustomCallout: {\r\n\t\t\t\t\t\t\t\t\tanchorX: 0,\r\n\t\t\t\t\t\t\t\t\tanchorY: 28,\r\n\t\t\t\t\t\t\t\t\tdisplay: \"ALWAYS\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tthis.markersList = markersPoints\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\tthis.markersList = []\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.markersList = markersPoints\r\n\t\t\t\t\t\t\tconsole.log(this.markersList)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tconst allPoints = res.data.map(item => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tlatitude: item.latitude,\r\n\t\t\t\t\t\t\t\tlongitude: item.longitude,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tthis._mapContext = uni.createMapContext('map', this);\r\n\t\t\t\t\t\tthis._mapContext.initMarkerCluster({\r\n\t\t\t\t\t\t\tenableDefaultStyle: false,\r\n\t\t\t\t\t\t\tzoomOnClick: true,\r\n\t\t\t\t\t\t\tgridSize: 60,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis._mapContext.includePoints({\r\n\t\t\t\t\t\t\tpadding: [100, 100, 100, 100],\r\n\t\t\t\t\t\t\tpoints: allPoints,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\t\tthis.includePoints = this.calculateBounds(allPoints)\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tconsole.error('获取会员列表 ', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 计算所有点的边界\r\n\t\t\tcalculateBounds(points) {\r\n\t\t\t\tif (!points || points.length === 0) return null;\r\n\t\t\t\tlet minLat = Infinity;\r\n\t\t\t\tlet maxLat = -Infinity;\r\n\t\t\t\tlet minLng = Infinity;\r\n\t\t\t\tlet maxLng = -Infinity;\r\n\t\t\t\tpoints.forEach(point => {\r\n\t\t\t\t\tconst lat = point.latitude;\r\n\t\t\t\t\tconst lng = point.longitude;\r\n\t\t\t\t\tminLat = Math.min(minLat, lat);\r\n\t\t\t\t\tmaxLat = Math.max(maxLat, lat);\r\n\t\t\t\t\tminLng = Math.min(minLng, lng);\r\n\t\t\t\t\tmaxLng = Math.max(maxLng, lng);\r\n\t\t\t\t});\r\n\t\t\t\tconst latRange = maxLat - minLat;\r\n\t\t\t\tconst lngRange = maxLng - minLng;\r\n\t\t\t\tconst topPadding = latRange * 0.4;\r\n\t\t\t\tconst bottomPadding = latRange * 0.3;\r\n\t\t\t\tconst leftPadding = lngRange * 0.3;\r\n\t\t\t\tconst rightPadding = lngRange * 0.3;\r\n\t\t\t\tminLat = minLat - bottomPadding;\r\n\t\t\t\tmaxLat = maxLat + topPadding;\r\n\t\t\t\tminLng = minLng - leftPadding;\r\n\t\t\t\tmaxLng = maxLng + rightPadding;\r\n\t\t\t\treturn [{ latitude: minLat, longitude: minLng }, { latitude: maxLat, longitude: maxLng }];\r\n\t\t\t},\r\n\t\t\t// 获取分类列表\r\n\t\t\tgetClassifyList() {\r\n\t\t\t\t// type: 1.会员级别，2.行业分类，3.分支机构\r\n\t\t\t\tconst endFunction = () => {\r\n\t\t\t\t\tthis.loadEnd = true\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.createSelectorQuery().in(this).select('.diy-member-map').boundingClientRect(data => {\r\n\t\t\t\t\t\t\tthis.componentHeight = data?.height\r\n\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showCategory.type == 2) {\r\n\t\t\t\t\tthis.getIndustry(() => {\r\n\t\t\t\t\t\tendFunction()\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (this.showCategory.type == 3) {\r\n\t\t\t\t\tthis.page = 1\r\n\t\t\t\t\tthis.getInstitution(() => {\r\n\t\t\t\t\t\tendFunction()\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getMemberLevel(() => {\r\n\t\t\t\t\t\tendFunction()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取会员级别\r\n\t\t\tgetMemberLevel(fn) {\r\n\t\t\t\tthis.$util.request(\"member.level\").then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tthis.classifyList = res.data || []\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\tconsole.error('获取会员级别 ', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取行业分类\r\n\t\t\tgetIndustry(fn) {\r\n\t\t\t\tthis.$util.request(\"member.industry\").then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tthis.classifyList = res.data || []\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\tconsole.error('获取行业分类 ', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取分支机构\r\n\t\t\tgetInstitution(fn) {\r\n\t\t\t\tthis.$util.request(\"institution.list\", {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tlimit: this.limit\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tlet list = res.data.data\r\n\t\t\t\t\t\tthis.hasMore = this.page < res.data.total / this.limit ? true : false\r\n\t\t\t\t\t\tthis.classifyList = this.page == 1 ? list : [...this.classifyList, ...list];\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\tif (fn) fn()\r\n\t\t\t\t\tconsole.error('获取机构列表', error)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 滚动到底部\r\n\t\t\tscrollBottom() {\r\n\t\t\t\tif (this.hasMore) {\r\n\t\t\t\t\tthis.page++\r\n\t\t\t\t\tthis.getInstitution()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 更换分类\r\n\t\t\tchangeClassify(id) {\r\n\t\t\t\tif (id == -1) {\r\n\t\t\t\t\tthis.selectClassify = []\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst index = this.selectClassify.findIndex(item => item == id)\r\n\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\tthis.$delete(this.selectClassify, index)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.selectClassify.push(id)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.loadTimer) clearTimeout(this.loadTimer)\r\n\t\t\t\tthis.loadTimer = setTimeout(() => {\r\n\t\t\t\t\tthis.getMemberList()\r\n\t\t\t\t}, 400);\r\n\t\t\t},\r\n\t\t\t// 跳转会员详情\r\n\t\t\ttoMemberDetails(res) {\r\n\t\t\t\tif (this.toPageTimer) clearTimeout(this.toPageTimer)\r\n\t\t\t\tthis.toPageTimer = setTimeout(() => {\r\n\t\t\t\t\tthis.$util.toPage({\r\n\t\t\t\t\t\tmode: 1,\r\n\t\t\t\t\t\tpath: \"/pages/member/details?id=\" + res.detail.markerId,\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 50);\r\n\t\t\t},\r\n\t\t\t// 展开/折叠分类列表\r\n\t\t\thandleExpand(type) {\r\n\t\t\t\tuni.createSelectorQuery().in(this).select('.diy-member-map').boundingClientRect(data => {\r\n\t\t\t\t\tthis.componentHeight = data?.height\r\n\t\t\t\t}).exec();\r\n\t\t\t\tif (this.showCategory.styleMode == 2) {\r\n\t\t\t\t\tthis.isExpandCategory2 = type == 1 ? true : false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isExpandCategory1 = !this.isExpandCategory1\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.diy-member-map {\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\r\n\t\t&.flex-column {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.map-context {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tflex: 1;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t.map {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\r\n\t\t\t.callout-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 16rpx;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tbackground: #FFF;\r\n\r\n\t\t\t\t.item-avatar {\r\n\t\t\t\t\twidth: 56rpx;\r\n\t\t\t\t\theight: 56rpx;\r\n\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\tobject-fit: cover;\r\n\t\t\t\t\tmargin-right: 8rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.item-name {\r\n\t\t\t\t\tcolor: #5A5B6E;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.map-classify {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t.classify-list {\r\n\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t.list-item {\r\n\t\t\t\t\tline-height: 1.4;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\tword-break: break-all;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.classify-more {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 12rpx 24rpx;\r\n\t\t\t\tgap: 8rpx;\r\n\r\n\t\t\t\t.more-icon {\r\n\t\t\t\t\twidth: 32rpx;\r\n\t\t\t\t\theight: 32rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.more-text {\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tline-height: 32rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&.style-1 {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 9;\r\n\r\n\t\t\t\t.classify-list {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.classify-more {\r\n\t\t\t\t\tmin-width: 184rpx;\r\n\t\t\t\t\tmargin-bottom: 16rpx;\r\n\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\t.more-icon {\r\n\t\t\t\t\t\ttransform: rotate(90deg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.collapse {\r\n\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\twidth: fit-content;\r\n\r\n\t\t\t\t\t\t.more-icon {\r\n\t\t\t\t\t\t\ttransform: rotate(-90deg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&.style-2 {\r\n\t\t\t\t.classify-list {\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t.list-item {\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.map-more {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tz-index: 9;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 12rpx 24rpx;\r\n\r\n\t\t\t.more-icon {\r\n\t\t\t\twidth: 32rpx;\r\n\t\t\t\theight: 32rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.more-text {\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tline-height: 32rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.map-popup {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tright: 0;\r\n\t\t\tleft: 0;\r\n\r\n\t\t\t.popup-classify {\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t.classify-scroll {\r\n\t\t\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t\t\t.scroll-list {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t\t\t\t.list-item {\r\n\t\t\t\t\t\t\tline-height: 1.4;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.scroll-space {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 56rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.classify-more {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tbottom: 0;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\tright: 0;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tpadding: 12rpx 24rpx;\r\n\r\n\t\t\t\t\t.more-icon {\r\n\t\t\t\t\t\twidth: 32rpx;\r\n\t\t\t\t\t\theight: 32rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.more-text {\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tline-height: 32rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./memberMapDiy.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./memberMapDiy.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1756370174915\n      var cssReload = require(\"D:/Tool_dev/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}